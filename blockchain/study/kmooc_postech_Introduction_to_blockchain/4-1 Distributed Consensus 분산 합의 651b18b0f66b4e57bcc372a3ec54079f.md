# 4-1. Distributed Consensus 분산 합의

1. 설명
    
    ![Screenshot_20220101-154822_K-MOOC.jpg](4-1%20Distributed%20Consensus%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%20%E1%84%92%E1%85%A1%E1%86%B8%E1%84%8B%E1%85%B4%20651b18b0f66b4e57bcc372a3ec54079f/Screenshot_20220101-154822_K-MOOC.jpg)
    
    ![Screenshot_20220101-155142_K-MOOC.jpg](4-1%20Distributed%20Consensus%20%E1%84%87%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A1%E1%86%AB%20%E1%84%92%E1%85%A1%E1%86%B8%E1%84%8B%E1%85%B4%20651b18b0f66b4e57bcc372a3ec54079f/Screenshot_20220101-155142_K-MOOC.jpg)
    
    - 의미
        - 블록체인에서의 합의 : 참여자 중 누우게에 블록을 생성할 권한을 주느냐?
        - 중앙기관 없이, 참여자들끼리 서로 연결되어있는 구조이기 때문에, 여러 의견을 모아야 함
            - 올바른 참가자들은 모두에 의해 같은 값으로 결정을 내리면서 합의과정을 끝내야 함
            - 임의의 값이 될 수 없고, 하나의 올바른 참가자가 제안한 값이어야 함
            - 
            
            → 이 2가지가 만족될 경우 분산 합의가 가능 
            
    - 분산 합의의 필요성
        - 2가지 메시지를 받는 경우, 네트워크 속도에 따라 메시지 받는 시간이 달라짐
        - 자신이 받은 이후 연결된 타인에게 공유
        - 전체적으로 다 받을 수 있으며, 받은 순서대로 메시지 순서를 연결할 수 있음
        - 합의를 이루어내기 위해서는 참여자 모두 같은 결과물을 가지고 있어야 하는데, 그 순서가 ‘달라질 수 있음’
        
        → 분산시스템에서 모두가 동일한 상태를 가지고 있을 수 있도록 하는 것이 ‘분산 합의 알고리즘’ 
        
        기존의 중앙화 시스템 : 각 참여자가 가지고 있는 서로 다른 상태를 중앙시스템이 조율해줌
        
        탈 중앙화 시트템의 경우, 이러한 부분이 제공되지 않음
        
        분산합의가 이루어지는 방법
        
        1. peer-to-peer 네트워크의 모든 노드에서 합의에 도달한 일련의 트랜잭션 블록이 있을 것
            1. 최적화된 상태로 존재하기 위해 블록체인 형태로 구성되어있음
            2. 각 노드는 처리되지 않은 트랜젝션을 가질 수 있음, 조금씩 다름
        2. 세 노드가 있다면, 노드들은 같은 합의 프로토콜을 운영함 
        
        분산 합의 시스템의 무네점
        
        - 노드가 제거되거나 악의적일 수 있음
        - p2p 시스템이나 모든 노드가 연결되어있지 않다면 네트워크는 불안정
        - 인터넷 연결되어있지 않다면 문제
        - 통신 지연 발생 가능
        
        1. 종류 
        - 작업증명 : PoW
            - 목표값 이하의 해시를 찾는 과정을 무수히 반복함으로써 해당 작업에 참여했음을 증명하는 방식의 알고리즘
            - bitcoin, ethereum, litecoin
        - 지분증명 : PoS
            - 가지고 있는 지분에 따라 증명
        - 위임증명 : DPoS
            - 소유자들이 위임할 대표자를 자신의 지분율에 따라 투표권 활용하여 선정, 그들이 대신함
            - EOS...
        - 합의알고리즘의 BFT를 확장: PBFT